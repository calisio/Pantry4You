{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Linking from \"react-native-web/dist/exports/Linking\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport StatusBar from \"react-native-web/dist/exports/StatusBar\";\nimport GetRecipesIds from \"./GetRecipesIds\";\nimport React, { useState, useEffect } from 'react';\nimport { useTheme } from '@mui/material/styles';\nimport Box from '@mui/material/Box';\nimport Paper from '@mui/material/Paper';\nimport Button from '@mui/material/Button';\nimport CircularProgress from '@mui/material/CircularProgress';\nimport Grid from '@mui/material/Grid';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar Home = function Home(_ref) {\n  var navigation = _ref.navigation,\n    route = _ref.route;\n  console.log(\"HOME RENDERED\");\n  var uid = route.params.uid;\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    recipeList = _useState2[0],\n    setRecipeList = _useState2[1];\n  var _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    isRefreshing = _useState4[0],\n    setIsRefreshing = _useState4[1];\n  var _useState5 = useState(true),\n    _useState6 = _slicedToArray(_useState5, 2),\n    isLoading = _useState6[0],\n    setIsLoading = _useState6[1];\n  function fetchRecipes() {\n    return _fetchRecipes.apply(this, arguments);\n  }\n  function _fetchRecipes() {\n    _fetchRecipes = _asyncToGenerator(function* () {\n      setIsLoading(true);\n      var recipesIds = yield GetRecipesIds(uid);\n      var recipeListTemp = [];\n      for (var i = 0; i < recipesIds.length; i++) {\n        try {\n          var recipe = yield fetch('https://api.spoonacular.com/recipes/' + recipesIds[i] + '/information?includeNutrition=false', {\n            method: 'GET',\n            headers: {\n              'Content-Type': 'application/json',\n              'x-api-key': '2b747b3902c148758955f81fcac5bb4f'\n            }\n          });\n          var data = yield recipe.json();\n          console.log(data);\n          var recipeObj = {\n            title: data['title'],\n            imgUrl: data['image'],\n            recipeUrl: data['sourceUrl'],\n            recipeId: data['id'],\n            soureName: data['sourceName']\n          };\n          recipeListTemp.push(recipeObj);\n        } catch (error) {\n          console.log(error);\n        }\n      }\n      setRecipeList(recipeListTemp);\n      setIsLoading(false);\n    });\n    return _fetchRecipes.apply(this, arguments);\n  }\n  useEffect(function () {\n    fetchRecipes();\n  }, []);\n  var handleRefresh = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      console.log(\"REFRESH\");\n      setIsRefreshing(true);\n      yield fetchRecipes();\n      setIsRefreshing(false);\n    });\n    return function handleRefresh() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var RecipeView = function RecipeView(_ref3) {\n    var item = _ref3.item;\n    return _jsx(Box, {\n      sx: {\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        flexWrap: 'wrap'\n      },\n      children: _jsx(Paper, {\n        elevation: 3,\n        children: _jsxs(Grid, {\n          container: true,\n          spacing: 2,\n          children: [_jsx(Grid, {\n            item: true,\n            xs: 4,\n            children: _jsx(Image, {\n              source: {\n                uri: item.imgUrl\n              },\n              style: {\n                width: auto,\n                height: 100\n              }\n            })\n          }), _jsxs(Grid, {\n            item: true,\n            xs: 8,\n            children: [_jsx(Text, {\n              children: item.title\n            }), _jsx(Text, {\n              onPress: function onPress() {\n                return Linking.openURL(item.recipeUrl);\n              },\n              children: item.sourceName\n            })]\n          }), _jsx(Grid, {\n            item: true,\n            xs: 12,\n            children: _jsx(Text, {\n              children: \"INGREDIENT LIST\"\n            })\n          })]\n        })\n      })\n    });\n  };\n  return _jsx(SafeAreaView, {\n    style: styles.container,\n    children: isLoading ? _jsx(Box, {\n      sx: {\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        height: \"100vh\"\n      },\n      children: _jsx(CircularProgress, {\n        color: \"primary\"\n      })\n    }) : _jsx(FlatList, {\n      data: recipeList,\n      renderItem: RecipeView,\n      keyExtractor: function keyExtractor(item) {\n        return item.recipeId;\n      },\n      ListHeaderComponent: function ListHeaderComponent() {\n        return _jsx(View, {\n          style: {\n            height: 10\n          }\n        });\n      },\n      ListFooterComponent: function ListFooterComponent() {\n        return _jsx(View, {\n          style: {\n            height: 10\n          }\n        });\n      },\n      ItemSeparatorComponent: function ItemSeparatorComponent() {\n        return _jsx(View, {\n          style: {\n            height: 50\n          }\n        });\n      },\n      onRefresh: handleRefresh,\n      refreshing: isRefreshing\n    })\n  });\n};\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    marginTop: StatusBar.currentHeight || 0\n  },\n  item: {\n    padding: 20,\n    marginVertical: 8,\n    marginHorizontal: 16\n  },\n  title: {\n    fontSize: 32\n  }\n});\nexport { Home };","map":{"version":3,"names":["GetRecipesIds","React","useState","useEffect","useTheme","Box","Paper","Button","CircularProgress","Grid","Home","navigation","route","console","log","uid","params","recipeList","setRecipeList","isRefreshing","setIsRefreshing","isLoading","setIsLoading","fetchRecipes","recipesIds","recipeListTemp","i","length","recipe","fetch","method","headers","data","json","recipeObj","title","imgUrl","recipeUrl","recipeId","soureName","push","error","handleRefresh","RecipeView","item","display","justifyContent","alignItems","flexWrap","uri","width","auto","height","Linking","openURL","sourceName","styles","container","StyleSheet","create","flex","marginTop","StatusBar","currentHeight","padding","marginVertical","marginHorizontal","fontSize"],"sources":["/Users/davidmutascio/Desktop/Senior/437/cse437project/Pages/Home/Home.js"],"sourcesContent":["import {Text, FlatList, SafeAreaView, View, Image, Linking, StyleSheet, StatusBar,} from 'react-native';\nimport GetRecipesIds from './GetRecipesIds';\nimport React, {useState, useEffect} from 'react';\nimport { useTheme } from '@mui/material/styles';\nimport Box from '@mui/material/Box';\nimport Paper from '@mui/material/Paper';\nimport Button from '@mui/material/Button';\nimport CircularProgress from '@mui/material/CircularProgress';\nimport Grid from '@mui/material/Grid';\n\nconst Home = ({navigation, route}) => {\n  console.log(\"HOME RENDERED\");\n  //const theme = useTheme();\n  const uid = route.params.uid;\n  const [recipeList, setRecipeList] = useState([]);\n  const [isRefreshing, setIsRefreshing] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n\n  //function used to get recipes\n  async function fetchRecipes() {\n    setIsLoading(true);\n    const recipesIds = await GetRecipesIds(uid);\n    let recipeListTemp = []\n    for (let i = 0; i<recipesIds.length; i++){\n      try{\n        const recipe = await fetch('https://api.spoonacular.com/recipes/'+recipesIds[i]+'/information?includeNutrition=false', {\n          method: 'GET',\n          headers: {\n            'Content-Type': 'application/json',\n            'x-api-key': '2b747b3902c148758955f81fcac5bb4f'\n          }\n          });\n          const data = await recipe.json();\n          console.log(data);\n          const recipeObj = {\n            title: data['title'],\n            imgUrl: data['image'],\n            recipeUrl: data['sourceUrl'],\n            recipeId: data['id'],\n            soureName: data['sourceName']\n          };\n          recipeListTemp.push(recipeObj);\n      } catch (error) {\n        console.log(error);\n      }\n    }\n    setRecipeList(recipeListTemp);\n    setIsLoading(false);\n  }\n\n  //on load, get recipes\n  useEffect(() => {\n    fetchRecipes();\n  }, []);\n\n  //on refresh, get recieps\n  const handleRefresh = async () => {\n    console.log(\"REFRESH\");\n    setIsRefreshing(true);\n    await fetchRecipes();\n    setIsRefreshing(false);\n  };\n\n  const RecipeView = ({item}) => (\n    <Box\n    sx={{\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'center',\n      flexWrap: 'wrap'\n    }}\n    >\n      <Paper elevation={3}>\n      <Grid container spacing={2}>\n        <Grid item xs={4}>\n          <Image\n            source={{ uri: item.imgUrl }}\n            style={{ width: auto, height: 100 }}\n          />\n        </Grid>\n        <Grid item xs={8}>\n          <Text>\n            {item.title}\n          </Text>\n          <Text\n            onPress={() => Linking.openURL(item.recipeUrl)}>\n            {item.sourceName}\n          </Text>\n        </Grid>\n        <Grid item xs={12}>\n          <Text>INGREDIENT LIST</Text>\n        </Grid>\n      </Grid>\n      </Paper>\n    </Box>\n  );\n\n\n  return (\n    <SafeAreaView style={styles.container}>\n      {isLoading ? (\n        <Box sx = {{\n          display:\"flex\",\n          alignItems:\"center\",\n          justifyContent:\"center\",\n          height:\"100vh\"\n        }}\n      >\n        <CircularProgress color=\"primary\" />\n      </Box>\n      ) : (\n        <FlatList\n          data={recipeList}\n          renderItem={RecipeView}\n          keyExtractor={(item) => item.recipeId}\n          ListHeaderComponent={() => <View style={{ height: 10 }} />}\n          ListFooterComponent={() => <View style={{ height: 10 }} />}\n          ItemSeparatorComponent={() => <View style={{ height: 50 }} />}\n          onRefresh={handleRefresh}\n          refreshing={isRefreshing}\n        />\n      )}\n    </SafeAreaView>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    marginTop: StatusBar.currentHeight || 0,\n  },\n  item: {\n    padding: 20,\n    marginVertical: 8,\n    marginHorizontal: 16,\n  },\n  title: {\n    fontSize: 32,\n  },\n});\n\nexport {Home};"],"mappings":"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"},"metadata":{},"sourceType":"module"}