{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Pressable from \"react-native-web/dist/exports/Pressable\";\nimport React, { useState } from 'react';\nimport { db } from \"../../../firebase\";\nimport { getAuth } from \"firebase/auth\";\nimport { getFoodUnit } from \"../../../utils/getFoodUnit\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar EditQuantity = function EditQuantity(props) {\n  var _useState = useState(''),\n    _useState2 = _slicedToArray(_useState, 2),\n    quantity = _useState2[0],\n    setQuantity = _useState2[1];\n  var submitHandler = function () {\n    var _ref = _asyncToGenerator(function* () {\n      if (quantity != '') {\n          var quantityInt = parseInt(quantity);\n          if (quantityInt < 0) {\n            Alert.alert(\"New quantity cannot be less than 0\");\n            return;\n          } else {\n            var editedItem = props.item[0];\n            var unit = yield getFoodUnit(editedItem);\n            var auth = getAuth();\n            var user = auth.currentUser.uid;\n            var collectionString = \"users/\" + user + \"/pantry\";\n            var itemRef = db.collection(collectionString).doc(editedItem);\n            console.log(\"EDITED \", editedItem);\n            console.log(unit);\n            yield itemRef.update(_defineProperty({}, unit, quantityInt), {\n              merge: true\n            }).then(console.log(\"edited quantity\")).then(function () {\n              props.updateFunction();\n            });\n          }\n        } else {\n        Alert.alert(\"Please enter a number\");\n      }\n    });\n    return function submitHandler() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsx(TextInput, {\n      clearButtonMode: \"always\",\n      style: styles.input,\n      placeholder: \"Input new quantity\",\n      onChangeText: function onChangeText(newQuantity) {\n        return setQuantity(newQuantity);\n      },\n      defaultValue: \"\",\n      id: \"quantity\"\n    }), _jsx(Pressable, {\n      title: \"Submit\",\n      onPress: submitHandler,\n      style: styles.button,\n      children: _jsx(Text, {\n        style: styles.text,\n        children: \"Submit\"\n      })\n    })]\n  });\n};\nvar styles = StyleSheet.create({\n  container: {\n    flexDirection: 'row',\n    alignItems: 'center'\n  },\n  input: {\n    width: '80%',\n    height: 20,\n    borderWidth: 1,\n    borderColor: 'gray',\n    borderRadius: 8,\n    paddingHorizontal: '5%'\n  },\n  button: {\n    backgroundColor: '#CCCCCC',\n    borderRadius: 8,\n    padding: 10\n  },\n  text: {\n    alignSelf: 'center'\n  }\n});\nexport { EditQuantity };","map":{"version":3,"names":["React","useState","db","getAuth","getFoodUnit","EditQuantity","props","quantity","setQuantity","submitHandler","quantityInt","parseInt","Alert","alert","editedItem","item","unit","auth","user","currentUser","uid","collectionString","itemRef","collection","doc","console","log","update","merge","then","updateFunction","styles","container","input","newQuantity","button","text","StyleSheet","create","flexDirection","alignItems","width","height","borderWidth","borderColor","borderRadius","paddingHorizontal","backgroundColor","padding","alignSelf"],"sources":["/Users/davidmutascio/Desktop/Senior/437/cse437project/Pages/Pantry/PantryComponents/EditQuantity.js"],"sourcesContent":["import { Alert, TextInput, View, Button, Text, StyleSheet, Pressable} from \"react-native\";\nimport React, {useState} from 'react';\nimport { db } from '../../../firebase';\nimport { getAuth } from \"firebase/auth\";\nimport { getFoodUnit } from \"../../../utils/getFoodUnit\";\n\n\n\nconst EditQuantity = (props) => {\n    const [quantity, setQuantity] = useState('');\n\n    const submitHandler = async() => {\n        if(quantity != '') //TODO: || is not a number\n        {\n            let quantityInt = parseInt(quantity);\n            if(quantityInt < 0){\n                Alert.alert(\"New quantity cannot be less than 0\");\n                return;\n            }\n            else{\n                let editedItem = props.item[0];\n                const unit = await getFoodUnit(editedItem);\n                const auth = getAuth();\n                const user = auth.currentUser.uid;\n                let collectionString = \"users/\" + user + \"/pantry\";\n                let itemRef = db.collection(collectionString).doc(editedItem);\n                console.log(\"EDITED \", editedItem);\n                console.log(unit);\n                await itemRef.update({\n                    [unit]: quantityInt\n                }, {merge: true})\n                .then(console.log(\"edited quantity\"))\n                .then(() => {\n                    props.updateFunction();\n                });\n\n            }\n        }\n        else{\n            Alert.alert(\"Please enter a number\")\n        }\n    }\n\n    return(\n        <View style={styles.container}>\n            <TextInput\n                clearButtonMode='always'\n                style={styles.input}\n                placeholder=\"Input new quantity\"\n                onChangeText={newQuantity => setQuantity(newQuantity)}\n                defaultValue={\"\"}\n                id=\"quantity\"\n            />\n            <Pressable\n                title=\"Submit\"\n                onPress={submitHandler}\n                style={styles.button}\n            >\n                <Text style={styles.text}>Submit</Text>\n            </Pressable>\n        </View>\n    );\n};\n\n\n\nconst styles = StyleSheet.create({\n    container: {\n        flexDirection: 'row',\n        alignItems: 'center',\n    },\n    input: {\n        width: '80%',\n        height: 20,\n        borderWidth: 1,\n        borderColor: 'gray',\n        borderRadius: 8,\n        paddingHorizontal: '5%',\n    },\n    button: {\n        backgroundColor: '#CCCCCC',\n        borderRadius: 8,\n        padding: 10,\n    },\n    text: {\n        alignSelf: 'center',\n    }\n\n});\n\n\nexport {EditQuantity};"],"mappings":"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"},"metadata":{},"sourceType":"module"}