{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport { db } from \"../../firebase\";\nvar GetRecipes = function () {\n  var _ref = _asyncToGenerator(function* (uid) {\n    var collectionString = \"users/\" + uid + \"/pantry\";\n    var pantryRef = db.collection(collectionString).doc(\"pantry\");\n    var pantryObj = yield pantryRef.get();\n    var pantryList = [];\n    for (var i = 0; i < Object.keys(pantryObj.data()).length; i++) {\n      if (Object.values(pantryObj.data())[i] < 1) {\n        continue;\n      }\n      var key = Object.keys(pantryObj.data())[i];\n      pantryList.push(key);\n    }\n    function fetchRecipes(_x2) {\n      return _fetchRecipes.apply(this, arguments);\n    }\n    function _fetchRecipes() {\n      _fetchRecipes = _asyncToGenerator(function* (ingredients) {\n        var recipeList = [];\n        var query = \"\";\n        for (var _i = 0; _i < ingredients.length; _i++) {\n          if (_i == 0) {\n            query += ingredients[_i];\n          } else {\n            query += \",+\" + ingredients[_i];\n          }\n        }\n        try {\n          var recipes = yield fetch('https://api.spoonacular.com/recipes/findByIngredients?ingredients=' + query + '&number=5&ranking=2', {\n            method: 'GET',\n            headers: {\n              'Content-Type': 'application/json',\n              'x-api-key': '2b747b3902c148758955f81fcac5bb4f'\n            }\n          });\n          var data = yield recipes.json();\n          for (var _i2 = 0; _i2 < data.length; _i2++) {\n            var tempRecipe = {\n              title: data[_i2]['title'],\n              imgUrl: data[_i2]['image'],\n              recipeId: data[_i2]['id'],\n              missedCount: data[_i2]['missedIngredientCount'],\n              missed: data[_i2]['missedIngredients'],\n              used: data[_i2]['usedIngredients'],\n              recipeUrl: \"\"\n            };\n            recipeList.push(tempRecipe);\n          }\n          return recipeList;\n        } catch (error) {\n          console.log(error);\n        }\n      });\n      return _fetchRecipes.apply(this, arguments);\n    }\n    return fetchRecipes(pantryList);\n  });\n  return function GetRecipes(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\nexport default GetRecipes;","map":{"version":3,"names":["db","GetRecipes","uid","collectionString","pantryRef","collection","doc","pantryObj","get","pantryList","i","Object","keys","data","length","values","key","push","fetchRecipes","ingredients","recipeList","query","recipes","fetch","method","headers","json","tempRecipe","title","imgUrl","recipeId","missedCount","missed","used","recipeUrl","error","console","log"],"sources":["/Users/davidmutascio/Desktop/Senior/437/cse437project/Pages/Home/GetRecipes.js"],"sourcesContent":["import { db } from '../../firebase';\n\nconst GetRecipes = async function(uid){\n    //get list of current ingredients\n    let collectionString = \"users/\" + uid + \"/pantry\";\n    let pantryRef = db.collection(collectionString).doc(\"pantry\");\n    let pantryObj = await pantryRef.get();\n    let pantryList = [];\n    for(let i = 0; i < Object.keys(pantryObj.data()).length; i++){\n        if (Object.values(pantryObj.data())[i]<1){\n            continue;\n        }\n        let key = Object.keys(pantryObj.data())[i];\n        pantryList.push(key)\n    }\n    //create query with list of ingredients\n    async function fetchRecipes(ingredients){\n        let recipeList = [];\n        let query = \"\"\n        for (let i=0; i<ingredients.length; i++){\n            if (i==0){\n                query+=ingredients[i];\n            }\n            else{\n                query+=(\",+\" + ingredients[i]);\n            }\n        }\n        try {\n            const recipes = await fetch('https://api.spoonacular.com/recipes/findByIngredients?ingredients='+query+'&number=5&ranking=2', {\n                method: 'GET',\n                headers: {\n                'Content-Type': 'application/json',\n                'x-api-key': '2b747b3902c148758955f81fcac5bb4f'\n                }\n            });\n            const data = await recipes.json();\n            for (let i = 0; i<data.length; i++){\n                let tempRecipe = {\n                    title: data[i]['title'],\n                    imgUrl: data[i]['image'],\n                    recipeId: data[i]['id'],\n                    missedCount: data[i]['missedIngredientCount'],\n                    missed: data[i]['missedIngredients'],\n                    used: data[i]['usedIngredients'],\n                    recipeUrl: \"\"\n                  };\n                recipeList.push(tempRecipe)\n            }\n            //console.log(recipeList);\n            return recipeList;\n          } catch (error) {\n            console.log(error);\n          }\n        }\n    return fetchRecipes(pantryList);\n}\n\nexport default GetRecipes;"],"mappings":";AAAA,SAASA,EAAE;AAEX,IAAMC,UAAU;EAAA,6BAAG,WAAeC,GAAG,EAAC;IAElC,IAAIC,gBAAgB,GAAG,QAAQ,GAAGD,GAAG,GAAG,SAAS;IACjD,IAAIE,SAAS,GAAGJ,EAAE,CAACK,UAAU,CAACF,gBAAgB,CAAC,CAACG,GAAG,CAAC,QAAQ,CAAC;IAC7D,IAAIC,SAAS,SAASH,SAAS,CAACI,GAAG,EAAE;IACrC,IAAIC,UAAU,GAAG,EAAE;IACnB,KAAI,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGC,MAAM,CAACC,IAAI,CAACL,SAAS,CAACM,IAAI,EAAE,CAAC,CAACC,MAAM,EAAEJ,CAAC,EAAE,EAAC;MACzD,IAAIC,MAAM,CAACI,MAAM,CAACR,SAAS,CAACM,IAAI,EAAE,CAAC,CAACH,CAAC,CAAC,GAAC,CAAC,EAAC;QACrC;MACJ;MACA,IAAIM,GAAG,GAAGL,MAAM,CAACC,IAAI,CAACL,SAAS,CAACM,IAAI,EAAE,CAAC,CAACH,CAAC,CAAC;MAC1CD,UAAU,CAACQ,IAAI,CAACD,GAAG,CAAC;IACxB;IAAC,SAEcE,YAAY;MAAA;IAAA;IAAA;MAAA,kCAA3B,WAA4BC,WAAW,EAAC;QACpC,IAAIC,UAAU,GAAG,EAAE;QACnB,IAAIC,KAAK,GAAG,EAAE;QACd,KAAK,IAAIX,EAAC,GAAC,CAAC,EAAEA,EAAC,GAACS,WAAW,CAACL,MAAM,EAAEJ,EAAC,EAAE,EAAC;UACpC,IAAIA,EAAC,IAAE,CAAC,EAAC;YACLW,KAAK,IAAEF,WAAW,CAACT,EAAC,CAAC;UACzB,CAAC,MACG;YACAW,KAAK,IAAG,IAAI,GAAGF,WAAW,CAACT,EAAC,CAAE;UAClC;QACJ;QACA,IAAI;UACA,IAAMY,OAAO,SAASC,KAAK,CAAC,oEAAoE,GAACF,KAAK,GAAC,qBAAqB,EAAE;YAC1HG,MAAM,EAAE,KAAK;YACbC,OAAO,EAAE;cACT,cAAc,EAAE,kBAAkB;cAClC,WAAW,EAAE;YACb;UACJ,CAAC,CAAC;UACF,IAAMZ,IAAI,SAASS,OAAO,CAACI,IAAI,EAAE;UACjC,KAAK,IAAIhB,GAAC,GAAG,CAAC,EAAEA,GAAC,GAACG,IAAI,CAACC,MAAM,EAAEJ,GAAC,EAAE,EAAC;YAC/B,IAAIiB,UAAU,GAAG;cACbC,KAAK,EAAEf,IAAI,CAACH,GAAC,CAAC,CAAC,OAAO,CAAC;cACvBmB,MAAM,EAAEhB,IAAI,CAACH,GAAC,CAAC,CAAC,OAAO,CAAC;cACxBoB,QAAQ,EAAEjB,IAAI,CAACH,GAAC,CAAC,CAAC,IAAI,CAAC;cACvBqB,WAAW,EAAElB,IAAI,CAACH,GAAC,CAAC,CAAC,uBAAuB,CAAC;cAC7CsB,MAAM,EAAEnB,IAAI,CAACH,GAAC,CAAC,CAAC,mBAAmB,CAAC;cACpCuB,IAAI,EAAEpB,IAAI,CAACH,GAAC,CAAC,CAAC,iBAAiB,CAAC;cAChCwB,SAAS,EAAE;YACb,CAAC;YACHd,UAAU,CAACH,IAAI,CAACU,UAAU,CAAC;UAC/B;UAEA,OAAOP,UAAU;QACnB,CAAC,CAAC,OAAOe,KAAK,EAAE;UACdC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;QACpB;MACF,CAAC;MAAA;IAAA;IACL,OAAOjB,YAAY,CAACT,UAAU,CAAC;EACnC,CAAC;EAAA,gBArDKR,UAAU;IAAA;EAAA;AAAA,GAqDf;AAED,eAAeA,UAAU"},"metadata":{},"sourceType":"module"}